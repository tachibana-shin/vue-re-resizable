(function(E,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],s):(E=typeof globalThis<"u"?globalThis:E||self,s(E.VueReResizable={},E.Vue))})(this,function(E,s){"use strict";const ne={width:"auto",height:"auto"},T=(t,c,n)=>Math.max(Math.min(t,n),c),oe=(t,c)=>Math.round(t/c)*c,_=(t,c)=>new RegExp(t,"i").test(c),F=t=>Boolean(t.touches&&t.touches.length),he=t=>t.clientX!==void 0&&t.clientY!==void 0,se=(t,c,n=0)=>{const r=c.reduce((l,y,x)=>Math.abs(y-t)<Math.abs(c[l]-t)?x:l,0),u=Math.abs(c[r]-t);return n===0||u<n?c[r]:t},Z=t=>(t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:`${t}px`),G=(t,c,n,r)=>{if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){const u=Number(t.replace("%",""))/100;return c*u}if(t.endsWith("vw")){const u=Number(t.replace("vw",""))/100;return n*u}if(t.endsWith("vh")){const u=Number(t.replace("vh",""))/100;return r*u}}return t},de=(t,c,n,r,u,l,y)=>(r=G(r,t.width,c,n),u=G(u,t.height,c,n),l=G(l,t.width,c,n),y=G(y,t.height,c,n),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof u>"u"?void 0:Number(u),minWidth:typeof l>"u"?void 0:Number(l),minHeight:typeof y>"u"?void 0:Number(y)}),fe=s.defineComponent({__name:"Resizer",props:{direction:null},emits:["resize:start"],setup(t,{emit:c}){return(n,r)=>(s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["resizer",`resizer-${t.direction}`]),onMousedown:r[0]||(r[0]=u=>c("resize:start",u)),onTouchstart:r[1]||(r[1]=u=>c("resize:start",u))},[s.renderSlot(n.$slots,"default",{},void 0,!0)],34))}}),Re="",ve=((t,c)=>{const n=t.__vccOpts||t;for(const[r,u]of c)n[r]=u;return n})(fe,[["__scopeId","data-v-ab2e16f7"]]),pe=s.defineComponent({__name:"Resizable",props:{grid:null,snap:null,snapGap:null,bounds:null,boundsByDirection:{type:Boolean},size:null,minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,lockAspectRatio:{type:[Boolean,Number]},lockAspectRatioExtraWidth:null,lockAspectRatioExtraHeight:null,enable:null,resizerStyles:null,resizerClasses:null,defaultSize:null,scale:null,resizeRatio:null},emits:["resize:start","resize:stop","resize"],setup(t,{emit:c}){const n=t,r=s.ref(),u=s.computed(()=>{var e;return(e=r.value)==null?void 0:e.parentNode}),l=s.computed(()=>{var e;return(e=r.value)==null?void 0:e.ownerDocument.defaultView}),y=s.computed(()=>{var i,a,h,v,g,d,m,f;const e=(v=(h=(i=n.size)==null?void 0:i.width)!=null?h:(a=n.defaultSize)==null?void 0:a.width)!=null?v:ne.width,o=(f=(m=(g=n.size)==null?void 0:g.height)!=null?m:(d=n.defaultSize)==null?void 0:d.height)!=null?f:ne.height;return{width:e,height:o}}),x={get value(){let e=0,o=0;if(r.value&&l.value){const i=r.value.offsetWidth,a=r.value.offsetHeight,h=r.value.style.position;h!=="relative"&&(r.value.style.position="relative"),e=r.value.style.width!=="auto"?r.value.offsetWidth:i,o=r.value.style.height!=="auto"?r.value.offsetHeight:a,r.value.style.position=h}return{width:e,height:o}}},le="__resizable_base__",ge=()=>{const e=l.value;if(!e)return null;const o=u.value;if(!o)return null;const i=e.document.createElement("div");return i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.transform="scale(0, 0)",i.style.left="0",i.style.flex="0 0 100%",i.classList?i.classList.add(le):i.className+=le,o.appendChild(i),i},me=e=>{const o=u.value;!o||o.removeChild(e)};function ae(){if(!u.value)return l.value?{width:l.value.innerWidth,height:l.value.innerHeight}:{width:0,height:0};const e=ge();if(!e)return{width:0,height:0};let o=!1;const i=u.value.style.flexWrap;i!=="wrap"&&(o=!0,u.value.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";const a={width:e.offsetWidth,height:e.offsetHeight};return o&&(u.value.style.flexWrap=i),me(e),a}function re(e,o){if(e.value===void 0||e.value==="auto")return"auto";if(y.value[o].toString().endsWith("%")){if(e.value.toString().endsWith("%"))return e.value.toString();const i=ae();return`${Number(e.value.toString().replace("px",""))/i[o]*100}%`}return Z(e.value)}const we=s.computed(()=>{const{size:e}=n,o=e&&typeof e.width<"u"&&!k.value?Z(e.width):re(b,"width"),i=e&&typeof e.height<"u"&&!k.value?Z(e.height):re(R,"height");return{width:o,height:i}}),k=s.ref(!1),S=s.ref("right"),p=s.reactive({x:0,y:0,width:0,height:0}),b=s.ref(y.value.width),R=s.ref(y.value.height),J=s.reactive({height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"}),A=s.ref();let K,M=1,Q=0,ee=0,P=0,X=0,Y=0,V=0,te=0,ie=0;s.onMounted(()=>{var o,i;const e=l.value.getComputedStyle(r.value);b.value=(o=b.value)!=null?o:x.value.width,R.value=(i=R.value)!=null?i:x.value.height,A.value=e.flexBasis!=="auto"?e.flexBasis:void 0}),s.onBeforeMount(()=>{ce()});function ye(){if(n.bounds==="parent"){const e=u.value;if(e){const o=e.getBoundingClientRect();Q=o.left,ee=o.top}}if(n.bounds&&typeof n.bounds!="string"){const e=n.bounds.getBoundingClientRect();te=e.left,ie=e.top}if(r.value){const{left:e,top:o,right:i,bottom:a}=r.value.getBoundingClientRect();P=e,X=i,Y=o,V=a}}function be(e,o){const i=n.scale||1,a=n.resizeRatio||1,{lockAspectRatio:h,lockAspectRatioExtraHeight:v,lockAspectRatioExtraWidth:g}=n;let d=p.width,m=p.height;const f=v||0,w=g||0;return _("right",S.value)&&(d=p.width+(e-p.x)*a/i,h&&(m=(d-w)/M+f)),_("left",S.value)&&(d=p.width-(e-p.x)*a/i,h&&(m=(d-w)/M+f)),_("bottom",S.value)&&(m=p.height+(o-p.y)*a/i,h&&(d=(m-f)*M+w)),_("top",S.value)&&(m=p.height-(o-p.y)*a/i,h&&(d=(m-f)*M+w)),{newWidth:d,newHeight:m}}function ze(e,o){const{boundsByDirection:i}=n,a=i&&_("left",S.value),h=i&&_("top",S.value);let v,g;if(n.bounds==="parent"){const d=u.value;d&&(v=a?X-Q:d.offsetWidth+(Q-P),g=h?V-ee:d.offsetHeight+(ee-Y))}else n.bounds==="window"?l.value&&(v=a?X:l.value.innerWidth-P,g=h?V:l.value.innerHeight-Y):n.bounds&&(v=a?X-te:n.bounds.offsetWidth+(te-P),g=h?V-ie:n.bounds.offsetHeight+(ie-Y));return v&&Number.isFinite(v)&&(e=e&&e<v?e:v),g&&Number.isFinite(g)&&(o=o&&o<g?o:g),{maxWidth:e,maxHeight:o}}function xe(e,o,i,a){var j,W;const{lockAspectRatio:h,lockAspectRatioExtraHeight:v,lockAspectRatioExtraWidth:g}=n,d=(j=a.width)!=null?j:10,m=i.width===void 0||i.width<0?e:i.width,f=(W=a.height)!=null?W:10,w=i.height===void 0||i.height<0?o:i.height,C=v||0,H=g||0;if(h){const N=(f-C)*M+H,B=(w-C)*M+H,L=(d-H)/M+C,O=(m-H)/M+C,U=Math.max(d,N),z=Math.min(m,B),q=Math.max(f,L),D=Math.min(w,O);e=T(e,U,z),o=T(o,q,D)}else e=T(e,d,m),o=T(o,f,w);return{newWidth:e,newHeight:o}}function ue(e,o,i){const a=y.value[i];return o.value==="auto"&&p[i]===e&&(a===void 0||a==="auto")?"auto":e}function We(e,o){if(!l.value)return;let i=0,a=0;if(he(e)?(i=e.clientX,a=e.clientY):F(e)&&(i=e.touches[0].clientX,a=e.touches[0].clientY),c("resize:start",{event:e,direction:o,el:r.value})===!1)return;n.size&&(n.size.height!==void 0&&n.size.height!==R.value&&(R.value=n.size.height),n.size.width!==void 0&&n.size.width!==b.value&&(b.value=n.size.width)),M=typeof n.lockAspectRatio=="number"?n.lockAspectRatio:x.value.width/x.value.height;let h;const v=l.value.getComputedStyle(r.value);if(v.flexBasis!=="auto"){const g=u.value;g&&(K=l.value.getComputedStyle(g).flexDirection.startsWith("row")?"row":"column",h=v.flexBasis)}ye(),Se(),p.x=i,p.y=a,p.width=x.value.width,p.height=x.value.height,k.value=!0,J.cursor=l.value.getComputedStyle(e.target).cursor||"auto",S.value=o,A.value=h}function $(e){var i,a;if(!k.value||!r.value)return;const o={width:x.value.width-p.width,height:x.value.height-p.height};c("resize:stop",{event:e,direction:S.value,el:r.value,delta:o}),n.size&&(((i=n.size)==null?void 0:i.width)!==void 0&&(b.value=n.size.width),((a=n.size)==null?void 0:a.height)!==void 0&&(b.value=n.size.height)),ce(),k.value=!1,J.cursor="auto"}function I(e){var O,U;if(!k.value||!l.value)return;if(l.value.TouchEvent&&F(e))try{e.preventDefault(),e.stopPropagation()}catch{}let{maxWidth:o,maxHeight:i,minWidth:a,minHeight:h}=n;const v=F(e)?e.touches[0].clientX:e.clientX,g=F(e)?e.touches[0].clientY:e.clientY,d=ae(),m=de(d,l.value.innerWidth,l.value.innerHeight,o,i,a,h);o=m.maxWidth,i=m.maxHeight,a=m.minWidth,h=m.minHeight;let{newHeight:f,newWidth:w}=be(v,g);const C=ze(o,i);(O=n.snap)!=null&&O.x&&(w=se(w,n.snap.x,n.snapGap)),(U=n.snap)!=null&&U.y&&(f=se(f,n.snap.y,n.snapGap));const H=xe(w,f,{width:C.maxWidth,height:C.maxHeight},{width:a,height:h});if(w=H.newWidth,f=H.newHeight,n.grid){const z=oe(w,n.grid[0]),q=oe(f,n.grid[1]),D=n.snapGap||0;w=D===0||Math.abs(z-w)<=D?z:w,f=D===0||Math.abs(q-f)<=D?q:f}const j={width:w-p.width,height:f-p.height};let W=w;const N=b.value;N&&typeof N=="string"&&(N.endsWith("%")?W=`${W/d.width*100}%`:N.endsWith("vw")?W=`${W/l.value.innerWidth*100}vw`:N.endsWith("vh")&&(W=`${W/l.value.innerHeight*100}vh`));let B=f;const L=R.value;L&&typeof L=="string"&&(L.endsWith("%")?B=`${B/d.height*100}%`:L.endsWith("vw")?B=`${B/l.value.innerWidth*100}vw`:L.endsWith("vh")&&(B=`${B/l.value.innerHeight*100}vh`)),b.value=ue(W,b,"width"),R.value=ue(B,R,"height"),K==="row"?A.value=b.value:K==="column"&&(A.value=R.value),c("resize",{event:e,direction:S.value,el:r.value,delta:j})}function Se(){l.value&&(l.value.addEventListener("mouseup",$),l.value.addEventListener("mousemove",I),l.value.addEventListener("mouseleave",$),l.value.addEventListener("touchmove",I,{capture:!0,passive:!1}),l.value.addEventListener("touchend",$))}function ce(){l.value&&(l.value.removeEventListener("mouseup",$),l.value.removeEventListener("mousemove",I),l.value.removeEventListener("mouseleave",$),l.value.removeEventListener("touchmove",I,!0),l.value.removeEventListener("touchend",$))}return(e,o)=>(s.openBlock(),s.createElementBlock("div",{ref_key:"resizable",ref:r,style:s.normalizeStyle({position:"relative",userSelect:k.value?"none":"auto",...s.unref(we),maxWidth:t.maxWidth,maxHeight:t.maxHeight,minWidth:t.minWidth,minHeight:t.minHeight,boxSizing:"border-box",flexShrink:0,flexBasis:A.value})},[k.value?(s.openBlock(),s.createElementBlock("div",{key:0,style:s.normalizeStyle(J)},null,4)):s.createCommentVNode("",!0),s.renderSlot(e.$slots,"default"),t.enable?(s.openBlock(!0),s.createElementBlock(s.Fragment,{key:1},s.renderList(Object.entries(t.enable).filter(([i,a])=>a),([i])=>{var a,h;return s.openBlock(),s.createBlock(ve,{key:i,direction:i,"onResize:start":v=>We(v,i),style:s.normalizeStyle((a=t.resizerStyles)==null?void 0:a[i]),class:s.normalizeClass((h=t.resizerClasses)==null?void 0:h[i])},{default:s.withCtx(()=>[s.renderSlot(e.$slots,`resizer-${i}`)]),_:2},1032,["direction","onResize:start","style","class"])}),128)):s.createCommentVNode("",!0)],4))}});E.Resizable=pe,Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});

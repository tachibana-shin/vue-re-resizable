"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const a=require("vue"),ae={width:"auto",height:"auto"},V=(t,c,n)=>Math.max(Math.min(t,n),c),ue=(t,c)=>Math.round(t/c)*c,$=(t,c)=>new RegExp(t,"i").test(c),j=t=>Boolean(t.touches&&t.touches.length),ye=t=>t.clientX!==void 0&&t.clientY!==void 0,re=(t,c,n=0)=>{const u=c.reduce((l,y,x)=>Math.abs(y-t)<Math.abs(c[l]-t)?x:l,0),r=Math.abs(c[u]-t);return n===0||r<n?c[u]:t},te=t=>(t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:`${t}px`),U=(t,c,n,u)=>{if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){const r=Number(t.replace("%",""))/100;return c*r}if(t.endsWith("vw")){const r=Number(t.replace("vw",""))/100;return n*r}if(t.endsWith("vh")){const r=Number(t.replace("vh",""))/100;return u*r}}return t},be=(t,c,n,u,r,l,y)=>(u=U(u,t.width,c,n),r=U(r,t.height,c,n),l=U(l,t.width,c,n),y=U(y,t.height,c,n),{maxWidth:typeof u>"u"?void 0:Number(u),maxHeight:typeof r>"u"?void 0:Number(r),minWidth:typeof l>"u"?void 0:Number(l),minHeight:typeof y>"u"?void 0:Number(y)}),ze=a.defineComponent({__name:"Resizer",props:{direction:null},emits:["resize:start"],setup(t,{emit:c}){return(n,u)=>(a.openBlock(),a.createElementBlock("div",{class:a.normalizeClass(["resizer",`resizer-${t.direction}`]),onMousedown:u[0]||(u[0]=r=>c("resize:start",r)),onTouchstart:u[1]||(u[1]=r=>c("resize:start",r))},[a.renderSlot(n.$slots,"default",{},void 0,!0)],34))}});const xe=(t,c)=>{const n=t.__vccOpts||t;for(const[u,r]of c)n[u]=r;return n},We=xe(ze,[["__scopeId","data-v-ab2e16f7"]]),Se=a.defineComponent({__name:"Resizable",props:{grid:null,snap:null,snapGap:null,bounds:null,boundsByDirection:{type:Boolean},size:null,minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,lockAspectRatio:{type:[Boolean,Number]},lockAspectRatioExtraWidth:null,lockAspectRatioExtraHeight:null,enable:null,resizerStyles:null,resizerClasses:null,defaultSize:null,scale:null,resizeRatio:null},emits:["resize:start","resize:stop","resize"],setup(t,{emit:c}){const n=t,u=a.ref(),r=a.computed(()=>{var e;return(e=u.value)==null?void 0:e.parentNode}),l=a.computed(()=>{var e;return(e=u.value)==null?void 0:e.ownerDocument.defaultView}),y=a.computed(()=>{var i,s,h,f,p,d,m,v;const e=(f=(h=(i=n.size)==null?void 0:i.width)!=null?h:(s=n.defaultSize)==null?void 0:s.width)!=null?f:ae.width,o=(v=(m=(p=n.size)==null?void 0:p.height)!=null?m:(d=n.defaultSize)==null?void 0:d.height)!=null?v:ae.height;return{width:e,height:o}}),x={get value(){let e=0,o=0;if(u.value&&l.value){const i=u.value.offsetWidth,s=u.value.offsetHeight,h=u.value.style.position;h!=="relative"&&(u.value.style.position="relative"),e=u.value.style.width!=="auto"?u.value.offsetWidth:i,o=u.value.style.height!=="auto"?u.value.offsetHeight:s,u.value.style.position=h}return{width:e,height:o}}},ie="__resizable_base__",ce=()=>{const e=l.value;if(!e)return null;const o=r.value;if(!o)return null;const i=e.document.createElement("div");return i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.transform="scale(0, 0)",i.style.left="0",i.style.flex="0 0 100%",i.classList?i.classList.add(ie):i.className+=ie,o.appendChild(i),i},he=e=>{const o=r.value;!o||o.removeChild(e)};function ne(){if(!r.value)return l.value?{width:l.value.innerWidth,height:l.value.innerHeight}:{width:0,height:0};const e=ce();if(!e)return{width:0,height:0};let o=!1;const i=r.value.style.flexWrap;i!=="wrap"&&(o=!0,r.value.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";const s={width:e.offsetWidth,height:e.offsetHeight};return o&&(r.value.style.flexWrap=i),he(e),s}function oe(e,o){if(e.value===void 0||e.value==="auto")return"auto";if(y.value[o].toString().endsWith("%")){if(e.value.toString().endsWith("%"))return e.value.toString();const i=ne();return`${Number(e.value.toString().replace("px",""))/i[o]*100}%`}return te(e.value)}const de=a.computed(()=>{const{size:e}=n,o=e&&typeof e.width<"u"&&!k.value?te(e.width):oe(b,"width"),i=e&&typeof e.height<"u"&&!k.value?te(e.height):oe(M,"height");return{width:o,height:i}}),k=a.ref(!1),S=a.ref("right"),g=a.reactive({x:0,y:0,width:0,height:0}),b=a.ref(y.value.width),M=a.ref(y.value.height),q=a.reactive({height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"}),D=a.ref();let Z,R=1,J=0,K=0,A=0,F=0,T=0,G=0,Q=0,ee=0;a.onMounted(()=>{var o,i;const e=l.value.getComputedStyle(u.value);b.value=(o=b.value)!=null?o:x.value.width,M.value=(i=M.value)!=null?i:x.value.height,D.value=e.flexBasis!=="auto"?e.flexBasis:void 0}),a.onBeforeMount(()=>{se()});function ve(){if(n.bounds==="parent"){const e=r.value;if(e){const o=e.getBoundingClientRect();J=o.left,K=o.top}}if(n.bounds&&typeof n.bounds!="string"){const e=n.bounds.getBoundingClientRect();Q=e.left,ee=e.top}if(u.value){const{left:e,top:o,right:i,bottom:s}=u.value.getBoundingClientRect();A=e,F=i,T=o,G=s}}function fe(e,o){const i=n.scale||1,s=n.resizeRatio||1,{lockAspectRatio:h,lockAspectRatioExtraHeight:f,lockAspectRatioExtraWidth:p}=n;let d=g.width,m=g.height;const v=f||0,w=p||0;return $("right",S.value)&&(d=g.width+(e-g.x)*s/i,h&&(m=(d-w)/R+v)),$("left",S.value)&&(d=g.width-(e-g.x)*s/i,h&&(m=(d-w)/R+v)),$("bottom",S.value)&&(m=g.height+(o-g.y)*s/i,h&&(d=(m-v)*R+w)),$("top",S.value)&&(m=g.height-(o-g.y)*s/i,h&&(d=(m-v)*R+w)),{newWidth:d,newHeight:m}}function ge(e,o){const{boundsByDirection:i}=n,s=i&&$("left",S.value),h=i&&$("top",S.value);let f,p;if(n.bounds==="parent"){const d=r.value;d&&(f=s?F-J:d.offsetWidth+(J-A),p=h?G-K:d.offsetHeight+(K-T))}else n.bounds==="window"?l.value&&(f=s?F:l.value.innerWidth-A,p=h?G:l.value.innerHeight-T):n.bounds&&(f=s?F-Q:n.bounds.offsetWidth+(Q-A),p=h?G-ee:n.bounds.offsetHeight+(ee-T));return f&&Number.isFinite(f)&&(e=e&&e<f?e:f),p&&Number.isFinite(p)&&(o=o&&o<p?o:p),{maxWidth:e,maxHeight:o}}function pe(e,o,i,s){var X,W;const{lockAspectRatio:h,lockAspectRatioExtraHeight:f,lockAspectRatioExtraWidth:p}=n,d=(X=s.width)!=null?X:10,m=i.width===void 0||i.width<0?e:i.width,v=(W=s.height)!=null?W:10,w=i.height===void 0||i.height<0?o:i.height,E=f||0,C=p||0;if(h){const H=(v-E)*R+C,B=(w-E)*R+C,N=(d-C)/R+E,Y=(m-C)/R+E,I=Math.max(d,H),z=Math.min(m,B),O=Math.max(v,N),_=Math.min(w,Y);e=V(e,I,z),o=V(o,O,_)}else e=V(e,d,m),o=V(o,v,w);return{newWidth:e,newHeight:o}}function le(e,o,i){const s=y.value[i];return o.value==="auto"&&g[i]===e&&(s===void 0||s==="auto")?"auto":e}function me(e,o){if(!l.value)return;let i=0,s=0;if(ye(e)?(i=e.clientX,s=e.clientY):j(e)&&(i=e.touches[0].clientX,s=e.touches[0].clientY),c("resize:start",{event:e,direction:o,el:u.value})===!1)return;n.size&&(n.size.height!==void 0&&n.size.height!==M.value&&(M.value=n.size.height),n.size.width!==void 0&&n.size.width!==b.value&&(b.value=n.size.width)),R=typeof n.lockAspectRatio=="number"?n.lockAspectRatio:x.value.width/x.value.height;let h;const f=l.value.getComputedStyle(u.value);if(f.flexBasis!=="auto"){const p=r.value;p&&(Z=l.value.getComputedStyle(p).flexDirection.startsWith("row")?"row":"column",h=f.flexBasis)}ve(),we(),g.x=i,g.y=s,g.width=x.value.width,g.height=x.value.height,k.value=!0,q.cursor=l.value.getComputedStyle(e.target).cursor||"auto",S.value=o,D.value=h}function L(e){var i,s;if(!k.value||!u.value)return;const o={width:x.value.width-g.width,height:x.value.height-g.height};c("resize:stop",{event:e,direction:S.value,el:u.value,delta:o}),n.size&&(((i=n.size)==null?void 0:i.width)!==void 0&&(b.value=n.size.width),((s=n.size)==null?void 0:s.height)!==void 0&&(b.value=n.size.height)),se(),k.value=!1,q.cursor="auto"}function P(e){var Y,I;if(!k.value||!l.value)return;if(l.value.TouchEvent&&j(e))try{e.preventDefault(),e.stopPropagation()}catch{}let{maxWidth:o,maxHeight:i,minWidth:s,minHeight:h}=n;const f=j(e)?e.touches[0].clientX:e.clientX,p=j(e)?e.touches[0].clientY:e.clientY,d=ne(),m=be(d,l.value.innerWidth,l.value.innerHeight,o,i,s,h);o=m.maxWidth,i=m.maxHeight,s=m.minWidth,h=m.minHeight;let{newHeight:v,newWidth:w}=fe(f,p);const E=ge(o,i);(Y=n.snap)!=null&&Y.x&&(w=re(w,n.snap.x,n.snapGap)),(I=n.snap)!=null&&I.y&&(v=re(v,n.snap.y,n.snapGap));const C=pe(w,v,{width:E.maxWidth,height:E.maxHeight},{width:s,height:h});if(w=C.newWidth,v=C.newHeight,n.grid){const z=ue(w,n.grid[0]),O=ue(v,n.grid[1]),_=n.snapGap||0;w=_===0||Math.abs(z-w)<=_?z:w,v=_===0||Math.abs(O-v)<=_?O:v}const X={width:w-g.width,height:v-g.height};let W=w;const H=b.value;H&&typeof H=="string"&&(H.endsWith("%")?W=`${W/d.width*100}%`:H.endsWith("vw")?W=`${W/l.value.innerWidth*100}vw`:H.endsWith("vh")&&(W=`${W/l.value.innerHeight*100}vh`));let B=v;const N=M.value;N&&typeof N=="string"&&(N.endsWith("%")?B=`${B/d.height*100}%`:N.endsWith("vw")?B=`${B/l.value.innerWidth*100}vw`:N.endsWith("vh")&&(B=`${B/l.value.innerHeight*100}vh`)),b.value=le(W,b,"width"),M.value=le(B,M,"height"),Z==="row"?D.value=b.value:Z==="column"&&(D.value=M.value),c("resize",{event:e,direction:S.value,el:u.value,delta:X})}function we(){l.value&&(l.value.addEventListener("mouseup",L),l.value.addEventListener("mousemove",P),l.value.addEventListener("mouseleave",L),l.value.addEventListener("touchmove",P,{capture:!0,passive:!1}),l.value.addEventListener("touchend",L))}function se(){l.value&&(l.value.removeEventListener("mouseup",L),l.value.removeEventListener("mousemove",P),l.value.removeEventListener("mouseleave",L),l.value.removeEventListener("touchmove",P,!0),l.value.removeEventListener("touchend",L))}return(e,o)=>(a.openBlock(),a.createElementBlock("div",{ref_key:"resizable",ref:u,style:a.normalizeStyle({position:"relative",userSelect:k.value?"none":"auto",...a.unref(de),maxWidth:t.maxWidth,maxHeight:t.maxHeight,minWidth:t.minWidth,minHeight:t.minHeight,boxSizing:"border-box",flexShrink:0,flexBasis:D.value})},[k.value?(a.openBlock(),a.createElementBlock("div",{key:0,style:a.normalizeStyle(q)},null,4)):a.createCommentVNode("",!0),a.renderSlot(e.$slots,"default"),t.enable?(a.openBlock(!0),a.createElementBlock(a.Fragment,{key:1},a.renderList(Object.entries(t.enable).filter(([i,s])=>s),([i])=>{var s,h;return a.openBlock(),a.createBlock(We,{key:i,direction:i,"onResize:start":f=>me(f,i),style:a.normalizeStyle((s=t.resizerStyles)==null?void 0:s[i]),class:a.normalizeClass((h=t.resizerClasses)==null?void 0:h[i])},{default:a.withCtx(()=>[a.renderSlot(e.$slots,`resizer-${i}`)]),_:2},1032,["direction","onResize:start","style","class"])}),128)):a.createCommentVNode("",!0)],4))}});exports.Resizable=Se;
